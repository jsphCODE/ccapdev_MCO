{{!-- 
Expected context structure:
{
  flights: [
    {
      airline: "Philippine Airlines",
      flightNumber: "PR123",
      origin: "Manila",
      destination: "Tokyo",
      departureDate: "2025-11-20",
      departureTime: "08:20",
      arrivalDate: "2025-11-20",
      arrivalTime: "13:00",
      price: "P15,000",
      aircraft: "Airbus A321",
      capacity: 180,
      _id: "abc"
    },
    ...
  ]
}
--}}

<h1 class="mb-2 text-center">Flight Search</h1>

<!-- Form -->
<form id="searchForm" class="row g-3 mb-4">
    <div class="col-md-4">
        <label for="origin" class="form-label">Origin</label>
        <input type="text" id="origin" class="form-control" placeholder="ex: Manila" required>
    </div>

    <div class="col-md-4">
        <label for="destination" class="form-label">Destination</label>
        <input type="text" id="destination" class="form-control" placeholder="ex: Tokyo" required>
    </div>

    <div class="col-md-4">
        <label for="departure" class="form-label">Departure Date</label>
        <input type="date" id="departure" class="form-control" required>
    </div>

    <div class="col-md-4">
        <label for="return" class="form-label">Return Date</label>
        <input type="date" id="return" class="form-control">
    </div>

    <div class="col-md-4">
        <label for="passengers" class="form-label">Passengers</label>
        <input type="number" id="passengers" class="form-control" min="1" value="1" required>
    </div>

    <div class="col-md-4 d-flex align-items-end">
        <button type="submit" class="btn btn-primary w-100">Calculate Price</button>
    </div>
    
</form>


{{#if flights}}
<table class="table table-striped table-bordered align-middle text-center">
    <thead class="table-dark">
        <tr>
            <th>#</th>
            <th>Flight</th> {{!-- Airline + flightNumber --}}
            <th>Flight Route</th> {{!-- Origin -> Destination --}}
            <th>Departure Date and Time</th> {{!-- Date + Time --}}
            <th>Arrival Date and Time</th> {{!-- Date + Time --}}  <!-- overnight flights-->
            <th>Price</th> {{!-- Price --}}
            <th>Aircraft Type</th> {{!-- A320? A350? --}}
            <th>Seat Capacity</th> {{!-- seat remaining?  --}}
            <th>Action</th>
        </tr>
    </thead>
    <tbody>
        {{#each flights}}
        <tr>
            <td>{{inc @index}}</td>
            <td>{{this.airline}}{{this.flightNumber}}</td>
            <td>{{this.origin}} â†’ {{this.destination}}</td>
            <td>{{this.schedule}}<br>{{this.departure}}</td> 
            <td>{{this.arrival_schedule}}<br>{{this.arrival}}</td>
            <td>{{this.price}}</td>
            <td>{{this.aircraft}}</td>
            <td>{{this.capacity}}</td>
            <td><a href="/reservations/{{this._id}}" class="btn btn-sm btn-info">Book</a>
            </td> 
        </tr>
        {{/each}}
    </tbody>
</table>
{{else}}
<p class="text-center text-muted">No flights found.</p>
{{/if}}