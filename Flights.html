<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="'UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Flights Management</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
    <script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>

    <style>
        body {
            background-color:green;
        }
        .card {
            border-radius: 30px;
        }
    </style>
</head>

<body>
    <!--Create/Edit-->
    <div class="card p-4 mb-5">
        <h4 class="text-center">Add or Edit Flight</h4>
        <form id="flightForm" class="row g-3">
            <div class="col-md-4">
                <label class="form-label">Flight Number</label>
                <input type="text" id="flightNumber" class="form-control" required>
            </div>
            <div class="col-md-4">
                <label class="form-label">Origin</label>
                <input type="text" id="origin" class="form-control" required>
            </div>
            <div class="col-md-4">
                <label class="form-label">Destination</label>
                <input type="text" id="destination" class="form-control" required>
            </div>
            <div class="col-md-4">
                <label class="form-label">Schedule</label>
                <input type="datetime-local" id="schedule" class="form-control" required>
            </div>
            <div class="col-md-4">
                <label class="form-label">Aircraft Type</label>
                <input type="text" id="aircraft" class="form-control" required>
            </div>
            <div class="col-md-4">
                <label class="form-label">Seat Capacity</label>
                <input type="number" id="capacity" class="form-control" min="1" required>
            </div>
            <div class="col-12 d-flex justify-content-end">
                <button type="submit" class="btn btn-success me-2">Save Flight</button>
                <button type="reset" class="btn btn-secondary">Clear</button>
            </div>
        </form>
    </div>

    <!--Flight Lists-->
    <div class="card p-4">
        <h4 class="mb-4">Flights List</h4>
        <table class="table table-bordered table-striped text-center">
            <thead class="table-light">
                <tr>
                    <th>Flight Number</th>
                    <th>Orgin</th>
                    <th>Destination</th>
                    <th>Schedule</th>
                    <th>Aircraft</th>
                    <th>Actions</th>
                </tr>
            </thead>
            <tbody id="flightTable"></tbody>
        </table>
    </div>
    <script>
        //Add and Update Flights
        let flights=[];
        $("#flightForm").on("submit", function(e) {
            e.preventDefault();
            const flight = {
                number: $("#flightNumber").val(),
                origin: $("#origin").val(),
                destination: $("#destination").val(),
                schedule: $("#schedule").val(),
                aircraft: $("#aircraft").val(),
                capacity: $("#capacity").val()
            };

            window.deleteFlight = function(index) {
            if (confirm("U sure u want to delete the flight?")) {
                flights.splice(index, 1);
                renderFlights();
            }
        };
        //Check if flight exists
        const index = flights.findIndex(f => f.number === flight.number);
        if (index >= 0) {
            flights[index] = flight;
        } else {
            flights.push(flight);
        }
            renderFlights();
            this.reset();

        });

        function renderFlights() {
            let rows = "";
            flights.forEach((f, i) => {
                rows += 
                `<tr>
                    <td>${f.number}</td>
                    <td>${f.origin}</td>
                    <td>${f.destination}</td>
                    <td>${new Date(f.schedule).toLocaleString()}</td>
                    <td>${f.aircraft}</td>
                    <td>${f.capacity}</td>
                    <td>
                    <button class="btn btn-warning" onclick="editFlight(${i})">Edit</button>
                    <button class="btn btn-danger" onclick="deleteFlight(${i})">Delete</button>
                    </td>
                </tr>`;
            });
            $("#flightTable").html(rows);
            }

            window.editFlight = function(index) {
                const f = flights[index];
                $("#flightNumber").val(f.number);
                $("#origin").val(f.origin);
                $("#destination").val(f.destination);
                $("#schedule").val(f.schedule);
                $("#aircraft").val(f.aircraft);
                $("#capacity").val(f.capacity);
            };    
            
      </script>
    </body>
</body>
</html>